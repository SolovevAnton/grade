## Задание

### Схема

Разработайте схему базы данных.

- Ваша БД должна хранить информацию о студентах (имя, фамилия, дата рождения, номер телефона, специализация, время
  создания записи, время обновления и т.д.)
- предметы (название предмета, фамилия лектора, и т.д.)
- результаты экзаменов (студент, предмет, оценка).

Добавьте необходимые констрейнты (primary keys, foreign keys, indexes, и т.д.).

Создание схемы БД и констрейнтов должны быть в разных файлах;
тестовые данные для индексов должны быть в отдельном файле.

Используйте PostgresSQL. Предоставьте схему БД в любом удобном виде (PDF, PNG, и т.д.).

### Тестовые данные:

- 100K пользователей
- 1K предметов (чтобы не выдумывать названия предметов, можно называть их просто Предмет 1, Предмет 2 и т.д.)
- 1 миллион оценок

### Индексы

- Попробуйте разные типы индексов (B-tree, Hash, GIN, GIST) для ваших полей.
- Проанализируйте производительность для разных типов индексов (используйте ANALYZE и EXPLAIN).
- Проверьте размеры получившихся индексов.
- Попробуйте установить индексы перед инсертом тестовых данных и после. Какое получилось время?

Сформируйте отчет в свободной форме с полученными результатами.

### Запросы

Запросы, которые необходимо написать:

1. Найти пользователя по имени (точное совпадение).
2. Найти пользователя по фамилии (частичное совпадение).
3. Найти пользователя по телефонному номеру (частичное совпадение).
4. Найти пользователя с его оценками по фамилии (частичное совпадение).
5. Добавьте триггер, который будет обновлять колонку updated_datetime на текущее значение даты в случае обновления
   информации о студенте.
6. Добавьте валидацию на уровне БД, которая будет проверять имя студента на наличие конкретных символов (не сохраняйте
   студентов, у которых в имени встречаются символы '@', '#', '$').
7. Создайте таблицу snapshot, которая будет содержать следующие данные: student name, student surname, subject name,
   mark (snapshot в данном случае значит, что в случае изменения каких-то данных в исходной таблице, данные в снепшоте
   не изменятся).
8. Напишите функцию, которая будет вычислять среднюю оценку для конкретного студента.
9. Напишите функцию, которая будет вычислять среднюю оценку среди всех студентов по конкретному предмету.
10. Напишите функцию, которая будет возвращать студентов в «красной зоне» («красная зона» значит, что у студента как
    минимум 2 оценки меньше 3).

## Ожидаемый результат

Результат выполненного задания должен быть таким:

- схема БД в удобном формате;
- отчет с анализом работы индексов;
- файлы с SQL скриптами.